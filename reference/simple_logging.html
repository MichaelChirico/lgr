<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Simple Logging — simple_logging • lgr</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Simple Logging — simple_logging" />
<meta property="og:description" content="lgr provides convenience functions managing the root Logger. These are
designed chiefly for interactive use and are less verbose than their
R6 method counterparts.
threshold() sets or retrieves the threshold for an Appender or Logger
(the minimum level of log messages it processes). It's target defaults to
the root logger. (equivalent to lgr::lgr$threshold and
lgr::lgr$set_threshold)
console_threshold() is a shortcut to set the threshold of the root
loggers AppenderConsole, which is usually the only Appender that manages
console output for a given R session. (equivalent to
lgr::lgr$appenders$console$threshold and
lgr::lgr$appenders$console$set_threshold)
add_appender() and remove_appender() add Appenders to Loggers and other
Appenders. (equivalent to lgr::lgr$add_appender and
lgr::lgr$remove_appender)
show_log() displays the last n log entries of an Appender (or a Logger
with such an Appender attached) with a $show() method. Most, but not all
Appenders support this function (try AppenderFile or AppenderBuffer).
show_data() and show_dt() work similar to show_log(), except that
they return the log as data.frame or data.table respectively. Only
Appenders that log to formats that can easily be converted to data.frames
are supported (try AppenderJson or AppenderBuffer).
The easiest way to try out this features is by adding an AppenderBuffer
to the root logger with basic_config(memory = TRUE)." />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">lgr</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.4.3</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../articles/lgr.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/s-fleck/lgr/">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Simple Logging</h1>
    <small class="dont-index">Source: <a href='https://github.com/s-fleck/lgr/blob/master/R/simple_logging.R'><code>R/simple_logging.R</code></a></small>
    <div class="hidden name"><code>simple_logging.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>lgr provides convenience functions managing the root Logger. These are
designed chiefly for interactive use and are less verbose than their
R6 method counterparts.</p>
<p><code>threshold()</code> sets or retrieves the threshold for an <a href='Appender.html'>Appender</a> or <a href='Logger.html'>Logger</a>
(the minimum level of log messages it processes). It's <code>target</code> defaults to
the root logger. (equivalent to <code>lgr::lgr$threshold</code> and
<code>lgr::lgr$set_threshold</code>)</p>
<p><code>console_threshold()</code> is a shortcut to set the threshold of the root
loggers <a href='AppenderConsole.html'>AppenderConsole</a>, which is usually the only Appender that manages
console output for a given <span style="R">R</span> session. (equivalent to
<code>lgr::lgr$appenders$console$threshold</code> and
<code>lgr::lgr$appenders$console$set_threshold</code>)</p>
<p><code>add_appender()</code> and <code>remove_appender()</code> add Appenders to Loggers and other
Appenders. (equivalent to <code>lgr::lgr$add_appender</code> and
<code>lgr::lgr$remove_appender</code>)</p>
<p><code>show_log()</code> displays the last <code>n</code> log entries of an Appender (or a Logger
with such an Appender attached) with a <code>$show()</code> method. Most, but not all
Appenders support this function (try <a href='AppenderFile.html'>AppenderFile</a> or <a href='AppenderBuffer.html'>AppenderBuffer</a>).</p>
<p><code>show_data()</code> and <code>show_dt()</code> work similar to <code>show_log()</code>, except that
they return the log as <code>data.frame</code> or <code>data.table</code> respectively. Only
Appenders that log to formats that can easily be converted to <code>data.frames</code>
are supported (try <a href='AppenderFile.html'>AppenderJson</a> or <a href='AppenderBuffer.html'>AppenderBuffer</a>).</p>
<p>The easiest way to try out this features is by adding an AppenderBuffer
to the root logger with <code><a href='basic_config.html'>basic_config(memory = TRUE)</a></code>.</p>
    </div>

    <pre class="usage"><span class='fu'>log_exception</span><span class='op'>(</span><span class='va'>code</span>, logfun <span class='op'>=</span> <span class='va'>lgr</span><span class='op'>$</span><span class='va'>fatal</span>, caller <span class='op'>=</span> <span class='fu'><a href='get_caller.html'>get_caller</a></span><span class='op'>(</span><span class='op'>-</span><span class='fl'>3</span><span class='op'>)</span><span class='op'>)</span>

<span class='fu'>threshold</span><span class='op'>(</span><span class='va'>level</span>, target <span class='op'>=</span> <span class='fu'>lgr</span><span class='fu'>::</span><span class='va'><a href='lgr-package.html'>lgr</a></span><span class='op'>)</span>

<span class='fu'>console_threshold</span><span class='op'>(</span><span class='va'>level</span>, target <span class='op'>=</span> <span class='fu'>lgr</span><span class='fu'>::</span><span class='va'><a href='lgr-package.html'>lgr</a></span><span class='op'>$</span><span class='va'>appenders</span><span class='op'>$</span><span class='va'>console</span><span class='op'>)</span>

<span class='fu'>add_appender</span><span class='op'>(</span><span class='va'>appender</span>, name <span class='op'>=</span> <span class='cn'>NULL</span>, target <span class='op'>=</span> <span class='fu'>lgr</span><span class='fu'>::</span><span class='va'><a href='lgr-package.html'>lgr</a></span><span class='op'>)</span>

<span class='fu'>remove_appender</span><span class='op'>(</span><span class='va'>pos</span>, target <span class='op'>=</span> <span class='fu'>lgr</span><span class='fu'>::</span><span class='va'><a href='lgr-package.html'>lgr</a></span><span class='op'>)</span>

<span class='fu'>show_log</span><span class='op'>(</span>threshold <span class='op'>=</span> <span class='cn'>NA_integer_</span>, n <span class='op'>=</span> <span class='fl'>20L</span>, target <span class='op'>=</span> <span class='fu'>lgr</span><span class='fu'>::</span><span class='va'><a href='lgr-package.html'>lgr</a></span><span class='op'>)</span>

<span class='fu'>show_dt</span><span class='op'>(</span>target <span class='op'>=</span> <span class='fu'>lgr</span><span class='fu'>::</span><span class='va'><a href='lgr-package.html'>lgr</a></span><span class='op'>)</span>

<span class='fu'>show_data</span><span class='op'>(</span>target <span class='op'>=</span> <span class='fu'>lgr</span><span class='fu'>::</span><span class='va'><a href='lgr-package.html'>lgr</a></span><span class='op'>)</span></pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>code</th>
      <td><p>Any <span style="R">R</span> code</p></td>
    </tr>
    <tr>
      <th>logfun</th>
      <td><p>a <code>function</code> for processing the log request, usually
<code>lgr$info()</code>, <code>lgr$debug()</code>, etc... .</p></td>
    </tr>
    <tr>
      <th>caller</th>
      <td><p>a <code>character</code> scalar. The name of the calling function</p></td>
    </tr>
    <tr>
      <th>level</th>
      <td><p><code>integer</code> or <code>character</code> scalar: the desired log level</p></td>
    </tr>
    <tr>
      <th>target</th>
      <td><p>a <a href='Logger.html'>Logger</a> or <a href='Appender.html'>Appender</a> or the name of a Logger as <code>character</code>
scalar</p></td>
    </tr>
    <tr>
      <th>appender</th>
      <td><p>an <code>Appender</code></p></td>
    </tr>
    <tr>
      <th>name</th>
      <td><p><code>character</code> scalar. An optional name for the new Appender.</p></td>
    </tr>
    <tr>
      <th>pos</th>
      <td><p><code>integer</code> index or <code>character</code> names of the appenders to remove</p></td>
    </tr>
    <tr>
      <th>threshold</th>
      <td><p><code>character</code> or <code>integer</code> scalar. The minimum <a href='get_log_levels.html'>log level</a> that should be processed by the root logger.</p></td>
    </tr>
    <tr>
      <th>n</th>
      <td><p><code>integer</code> scalar. Show only the last <code>n</code> log entries that match
<code>threshold</code></p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p><code>threshold()</code> and <code>console_threshold()</code> return the <a href='get_log_levels.html'>log_level</a> of <code>target</code>
as <code>integer</code> (invisibly)</p>
<p><code>add_appender()</code> and <code>remove_appender()</code> return <code>target</code>.</p>
<p><code>show_log()</code> prints to the console and returns whatever the target
Appender's <code>$show()</code> method returns, usually a <code>character</code> vector,
<code>data.frame</code> or <code>data.table</code> (invisibly).</p>
<p><code>show_data()</code> always returns a <code>data.frame</code> and <code>show_dt()</code> always returns
a <code>data.table</code>.</p>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='co'># Get and set the threshold of the root logger</span>
<span class='fu'>threshold</span><span class='op'>(</span><span class='st'>"error"</span><span class='op'>)</span>
<span class='fu'>threshold</span><span class='op'>(</span><span class='op'>)</span>
</div><div class='output co'>#&gt; [1] 200</div><div class='input'><span class='va'>lgr</span><span class='op'>$</span><span class='fu'>info</span><span class='op'>(</span><span class='st'>"this will be supressed"</span><span class='op'>)</span>
<span class='va'>lgr</span><span class='op'>$</span><span class='fu'>error</span><span class='op'>(</span><span class='st'>"an important error message"</span><span class='op'>)</span>
</div><div class='output co'>#&gt; ERROR [08:08:00.460] an important error message </div><div class='input'>
<span class='co'># you can also specify a target to modify other loggers</span>
<span class='va'>lg</span> <span class='op'>&lt;-</span> <span class='fu'><a href='get_logger.html'>get_logger</a></span><span class='op'>(</span><span class='st'>"test"</span><span class='op'>)</span>
<span class='fu'>threshold</span><span class='op'>(</span><span class='st'>"fatal"</span>, target <span class='op'>=</span> <span class='va'>lg</span><span class='op'>)</span>
<span class='fu'>threshold</span><span class='op'>(</span>target <span class='op'>=</span> <span class='va'>lg</span><span class='op'>)</span>
</div><div class='output co'>#&gt; [1] 100</div><div class='input'>
<span class='co'># If a Logger's threshold is not set, the threshold is inherited from</span>
<span class='co'># its parent, in this case the root logger (that we set to error/200 before)</span>
<span class='fu'>threshold</span><span class='op'>(</span><span class='cn'>NULL</span>, target <span class='op'>=</span> <span class='va'>lg</span><span class='op'>)</span>
<span class='fu'>threshold</span><span class='op'>(</span>target <span class='op'>=</span> <span class='va'>lg</span><span class='op'>)</span>
</div><div class='output co'>#&gt; [1] 200</div><div class='input'>
<span class='co'># Alternative R6 API for getting/setting thresholds</span>
<span class='va'>lg</span><span class='op'>$</span><span class='fu'>set_threshold</span><span class='op'>(</span><span class='st'>"info"</span><span class='op'>)</span>
<span class='va'>lg</span><span class='op'>$</span><span class='va'>threshold</span>
</div><div class='output co'>#&gt; [1] 400</div><div class='input'><span class='va'>lg</span><span class='op'>$</span><span class='fu'>set_threshold</span><span class='op'>(</span><span class='fl'>300</span><span class='op'>)</span>
<span class='va'>lg</span><span class='op'>$</span><span class='va'>threshold</span>
</div><div class='output co'>#&gt; [1] 300</div><div class='input'><span class='va'>lg</span><span class='op'>$</span><span class='fu'>set_threshold</span><span class='op'>(</span><span class='cn'>NULL</span><span class='op'>)</span>
<span class='va'>lg</span><span class='op'>$</span><span class='va'>threshold</span>
</div><div class='output co'>#&gt; [1] 200</div><div class='input'>
<span class='co'># cleanup</span>
<span class='va'>lgr</span><span class='op'>$</span><span class='fu'>config</span><span class='op'>(</span><span class='cn'>NULL</span><span class='op'>)</span>
</div><div class='output co'>#&gt; &lt;LoggerRoot&gt; [info] root</div><div class='input'><span class='va'>lg</span><span class='op'>$</span><span class='fu'>config</span><span class='op'>(</span><span class='cn'>NULL</span><span class='op'>)</span>
</div><div class='output co'>#&gt; &lt;Logger&gt; [info] test</div><div class='input'>

<span class='co'># add Appenders to a Logger</span>
<span class='fu'>add_appender</span><span class='op'>(</span><span class='va'><a href='AppenderConsole.html'>AppenderConsole</a></span><span class='op'>$</span><span class='fu'>new</span><span class='op'>(</span><span class='op'>)</span>, <span class='st'>"second_console_appender"</span><span class='op'>)</span>
<span class='va'>lgr</span><span class='op'>$</span><span class='fu'>fatal</span><span class='op'>(</span><span class='st'>"Multiple console appenders are a bad idea"</span><span class='op'>)</span>
</div><div class='output co'>#&gt; FATAL [08:08:00.474] Multiple console appenders are a bad idea </div><div class='input'><span class='fu'>remove_appender</span><span class='op'>(</span><span class='st'>"second_console_appender"</span><span class='op'>)</span>
<span class='va'>lgr</span><span class='op'>$</span><span class='fu'>info</span><span class='op'>(</span><span class='st'>"Good that we defined an appender name, so it's easy to remove"</span><span class='op'>)</span>

<span class='co'># Reconfigure the root logger</span>
<span class='fu'><a href='basic_config.html'>basic_config</a></span><span class='op'>(</span>memory <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span>
</div><div class='output co'>#&gt; &lt;LoggerRoot&gt; [info] root
#&gt; 
#&gt; appenders:
#&gt;   console: &lt;AppenderConsole&gt; [all] -&gt; console
#&gt;   memory : &lt;AppenderBuffer&gt;  [all] -&gt; 0 child Appenders</div><div class='input'>
<span class='co'># log some messages</span>
<span class='va'>lgr</span><span class='op'>$</span><span class='fu'>info</span><span class='op'>(</span><span class='st'>"a log message"</span><span class='op'>)</span>
</div><div class='output co'>#&gt; INFO  [08:08:00.482] a log message </div><div class='input'><span class='va'>lgr</span><span class='op'>$</span><span class='fu'>info</span><span class='op'>(</span><span class='st'>"another message with data"</span>, data <span class='op'>=</span> <span class='fl'>1</span><span class='op'>:</span><span class='fl'>3</span><span class='op'>)</span>
</div><div class='output co'>#&gt; INFO  [08:08:00.483] another message with data {data: (1, 2, 3)}</div><div class='input'>
<span class='fu'>show_log</span><span class='op'>(</span><span class='op'>)</span>
</div><div class='output co'>#&gt; INFO  [08:08:00] a log message
#&gt; INFO  [08:08:00] another message with data</div><div class='input'><span class='fu'>show_data</span><span class='op'>(</span><span class='op'>)</span>
</div><div class='output co'>#&gt;   level           timestamp logger caller                       msg    data
#&gt; 1   400 2021-09-16 08:08:00   root   eval             a log message    NULL
#&gt; 2   400 2021-09-16 08:08:00   root   eval another message with data 1, 2, 3</div><div class='input'>
<span class='co'># cleanup</span>
<span class='va'>lgr</span><span class='op'>$</span><span class='fu'>config</span><span class='op'>(</span><span class='cn'>NULL</span><span class='op'>)</span>
</div><div class='output co'>#&gt; &lt;LoggerRoot&gt; [info] root</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Stefan Fleck.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


